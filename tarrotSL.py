import random
import os
import base64
from gtts import gTTS
from datetime import datetime
from pydub import AudioSegment
from pydub.effects import speedup
import streamlit as st
import time  # Import time for simulating delay

# Tarot deck with Tamil interpretations
tarot_deck = {
    "The Fool": [
        "роЙроЩрпНроХро│рпБроХрпНроХрпБ рокрпБродро┐роп родрпКроЯроХрпНроХроорпН роХро╛родрпНродро┐ро░рпБроХрпНроХро┐ро▒родрпБ! роирогрпНрокро░рпНроХро│рпБроЯройрпН роЬрпВроорпН роЕро┤рпИрокрпНрокро┐ро▓рпН роЪрпЗро░рпНроирпНродрпБ ро╡ро┤роХрпНроХроорпН рокрпЛро▓рпН роХрпЛро╡ро╛ро╡рпБроХрпНроХрпБ роЪрпБро▒рпНро▒рпБро▓ро╛ роЪрпЖро▓рпНро▓рпБроорпН родро┐роЯрпНроЯродрпНродрпИ рокро▒рпНро▒ро┐ 140 ро╡родрпБ роорпБро▒рпИропро╛роХ рокрпЗроЪрпБроЩрпНроХро│рпН. роЗро▓рпНро▓рпИропрпЖройро▒ро╛ро▓рпН роЗро░рпБроХрпНроХрпБроорпН роЕро▓рпБро╡ро▓роХродрпНродро┐ро▓рпН рокрпЗрокрпНрокро░рпН рокрпЛроЯрпНроЯрпБро╡ро┐роЯрпНроЯрпБ рокрпБродро┐роп ро╡рпЗро▓рпИроХрпНроХрпБ роЯро╛роХро┐ рокрпЛро▓рпН родро┐ро░ро┐ропрпБроЩрпНроХро│рпН."
    ],
    "The Magician": [
        "роЙроЩрпНроХро│рпН родро┐ро▒роорпИроХро│рпИ роорпБро┤рпБро╡рпАроЪрпНроЪро┐ро▓рпН рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН тАУ рокро╛ро╡роХрпНроХро╛ропрпН рокроЪрпНроЪро░ро┐роЪро┐ рокро╛ропроЪродрпНродрпИ роЪрпЖропрпНроп роЪро░ро┐ропро╛рой роирпЗро░роорпН роЗродрпБ ! рокро┤рпИроп рокрпКро░рпБроЯрпНроХро│рпИ рокрпБродро┐родро╛роХ рооро╛ро▒рпНро▒рпБроорпН родро┐ро▒роорпИ роЙроЩрпНроХро│ро┐роЯрооро┐ро░рпБроХрпНроХро┐ро▒родрпБ, роХрпБроЯрпНроЯро┐ропро╛ропрпН роЗро░рпБроирпНродрокрпЛродрпБ рокрпЛроЯрпНроЯро┐ро░рпБроирпНрод роЬроЯрпНроЯро┐ропрпИ, роЪроорпИропро▓рпН роХроЯрпНроЯро┐ро▓рпН роЙродро╡рпБроорпН роХро░ро┐родрпНродрпБрогро┐ропро╛роХ роХроЯрпН роЪрпЖропрпНропрпБроорпН родро┐ро▒роорпИропрпИ роЙро▓роХрпБроХрпНроХрпБ роЪрпКро▓рпНро▓рпБроЩрпНроХро│рпН. роТро░рпБ рокрпБродро┐роп роорпБропро▒рпНроЪро┐ропрпИ роЪрпЖропрпНроп ро╡рпЗрогрпНроЯро┐роп роирпЗро░роорпН роЗродрпБ. роЪрпАроЯрпНроЯро┐ро▓рпНро▓ро╛род роЪрпИроХрпНроХро┐ро│ро┐ро▓рпН роЗроирпНродро┐роп роЪрпБро▒рпНро▒рпБро▓ро╛ роЪрпЖро▓рпНро▓ роЪро┐роирпНродро┐ропрпБроЩрпНроХро│рпН."
    ],
    "The High Priestess": [
        "роЙро│рпНро│рпБрогро░рпНро╡рпБ роЙроЩрпНроХро│рпБроХрпНроХрпБ роТро░рпБ роЪро╛ро╡ро┐! роГрокрпНро░ро┐роЯрпНроЬро┐ро▓рпН роТро│ро┐родрпНродрпБ ро╡рпИродрпНродро┐ро░рпБроХрпНроХрпБроорпН роХрпЗроХрпНроХрпИ ропро╛ро░ро╛ро╡родрпБ роОроЯрпБроХрпНроХ роиро┐ройрпИродрпНродро╛ро▓рпН роХрпВроЯ рокрпЛродрпБроорпН роЕро╡ро░рпНроХро│рпН роОроЯрпБрокрпНрокродрпИ родроЯрпБроХрпНроХрпБроорпН роХро┐ро▓рпНро▓ро╛роЯро┐ роирпАроЩрпНроХро│рпН. роЗройрпНро▒рпБ роЕроорпИродро┐ропрпБроЯройрпН роЙроЩрпНроХро│рпИ роЪрпБро▒рпНро▒ро┐ роироЯрокрпНрокродрпИ роХро╡ройро┐роХрпНроХ родрпКроЯроЩрпНроХрпБроЩрпНроХро│рпН. роорпЗройрпЗроЬро░рпН роЖрокро┐роЪро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН роирпЗро░родрпНродрпИ ро╡ро┐роЯ роХрпАро┤рпЗ роЯрпАроХрпНроХроЯрпИропро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН роирпЗро░роорпН роЕродро┐роХроорпН роОройрпНрокродрпБ роЙроЩрпНроХро│рпБроХрпНроХрпБ родрпЖро░ро┐роп ро╡ро░ро▓ро╛роорпН. роХрпЗро│рпНро╡ро┐ ро╡ро░рпБроорпН роорпБройрпН рокродро┐ро▓рпИ родропро╛ро░рпН роЪрпЖропрпНропрпБроорпН роЙроЩрпНроХро│рпН роЕро▒ро┐ро╡рпИ роЗропроХрпНроХрпБроорпН роиро╛ро│ро╛роХ роЗройрпНро▒рпБ роЗро░рпБроХрпНроХро╛ро▓ро╛роорпН. ро╡рпЗро▓рпИ роПройрпН роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ? роОройрпНро▒ роХрпЗро│рпНро╡ро┐ ро╡ро░рпБроорпН роорпБройрпНройрпЗ роПройрпЖройрпНро▒ро╛ро▓рпН роЙроЯроорпНрокрпБроХрпНроХрпБ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ ! роОройрпНро▒ рокродро┐ро▓рпИ родропро╛ро░роХ ро╡рпИродрпНродрпБроХрпН роХрпКро│рпНро│рпБроЩрпНроХро│рпН."
    ],
    "The Empress": [
        "роЕройрпНрокрпБроорпН рокро░ро╛рооро░ро┐рокрпНрокрпБроорпН роЙроЩрпНроХро│рпН роиро╛ро│рпИ роЕроорпИрокрпНрокродро▒рпНроХрпБ родропро╛ро░ро╛роХ роЗро░рпБроХрпНроХро┐ро▒рпАро░рпНроХро│рпН - роЙроЩрпНроХро│рпН роиро╛ропрпИ роХрпБро│ро┐рокрпНрокро╛роЯрпНроЯрпБроорпН роиро╛ро│рпН роирпЖро░рпБроЩрпНроХрпБроХро┐ро▒родрпБ. роЗройрпНро▒рпБ роЪроорпИрокрпНрокродрпБ роорпВро▓роорпН роЙроЩрпНроХро│рпН роХрпБроЯрпБроорпНрокродрпНродро┐ро▒рпНроХрпБ роороХро┐ро┤рпНроЪрпНроЪро┐ропрпИ рокроХро┐ро░ро▓ро╛рооро╛ - роЙроЯройрпЗ роЕроЯрпБрокрпНрокрпИ рокро▒рпНро▒ ро╡рпИродрпНродрпБ роЪрпБроЯрпБродрогрпНрогро┐ роЪроорпИропрпБроЩрпНроХро│рпН. роЪро┐ро▒ро┐роп роЪрпЗрооро┐рокрпНрокрпБроХро│ро┐ро▓рпН рокрпЖро░ро┐роп рооро╛ро▒рпНро▒роЩрпНроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХрпБроорпН родро┐ро▒ройрпИроХрпН роХрпКрогрпНроЯрпБро│рпНро│рпАро░рпНроХро│ро╛ - роЙрогрпНроЯро┐ропро▓рпИ роЙроЯрпИропрпБроЩрпНроХро│рпН."
    ],
    "The Emperor": [
        "родро┐роЯрпНроЯрооро┐роЯрпБроорпН родро┐ро▒ройрпЗ роЙроЩрпНроХро│рпН роЪроХрпНродро┐ тАУ роирпИроЯрпН рокро╛ро░рпНроЯрпНроЯро┐роХрпНроХрпБ роЪрпЖро▓рпНро▓ ро╡рпАроЯрпНроЯро┐ро▓рпН роЪрпКро▓рпНро▓ ро╡рпЗрогрпНроЯро┐роп рокрпКропрпНроХрпНроХрпБ родро┐роЯрпНроЯрооро┐роЯрпБроЩрпНроХро│рпН. роЗройрпНро▒рпБ роЙроЩрпНроХро│рпН ро╡рпЗро▓рпИ роирпЗро░родрпНродрпИ роЪроороиро┐ро▓рпИропро╛роХроЪрпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпЖройрпНро▒ро╛ро▓рпН роЖрокрпАроЪро┐ро▓рпН родрпВроЩрпНроХрпБроорпН роирпЗро░родрпНродрпИ роХрпБро▒рпИродрпНродрпБ ро╡ро┐роЯрпБроЩрпНроХро│рпН. рокрпБродро┐роп ро╡ро┤ро┐роорпБро▒рпИроХро│рпИроХрпН роХрогрпНроЯро▒ро┐роирпНродрпБ роЙроЩрпНроХро│рпН ро╡ро╛ро┤рпНроХрпНроХрпИропрпИ роОро│ро┐родро╛роХрпНроХ ро╡рпЗрогрпНроЯрпБрооро╛ройро╛ро▓рпН родро▓рпИроХрпАро┤ро╛роХ родройрпНрогро┐ роХрпБроЯро┐рокрпНрокродрпИ рокро▒рпНро▒ро┐ роЪро┐роирпНродро┐ропрпБроЩрпНроХро│рпН."
    ],
    "The Hierophant": [
        "рокро┤роорпИропро╛рой роирпБрогрпБроХрпНроХроЩрпНроХро│рпИ роЗроирпНрод роХро╛ро▓родрпНродро┐ро▒рпНроХрпБ роПро▒рпНрок рооро╛ро▒рпНро▒ ро╡рпЗрогрпНроЯрпБроорпЖройрпНро▒рпБ роиро┐ройрпИродрпНродрпАро░рпНроХро│ро╛ройро╛ро▓рпН ро▓рпВроЯрпЛро╡рпИ роЖройрпНро▓рпИройро┐ро▓рпН ро╡ро┐ро│рпИропро╛роЯрпБроЩрпНроХро│рпН. роЖройрпНрооро┐роХ рокропрогродрпНродро┐ро▓рпН рокрпБродрпБрокрпНрокро┐роХрпНроХ роирпЗро░роорпН роЗродрпБ. роЯро┐ро╡ро┐ропро┐ро▓рпН роХроирпНродройрпН роХро░рпБрогрпИ рокроЯроорпН рокро╛ро░рпБроЩрпНроХро│рпН. рокро┐ро▒ро░ро┐ройрпН роЖро▓рпЛроЪройрпИропрпИ роХрпЗроЯрпНроЯрпБ роЪрпЖропро▓рпНрокроЯроЯрпБроЩрпНроХро│рпН. роХрпНро░рпАроорпН 11 роЖрокрпНрокро┐ро▓рпН ропро╛ро░рпИ роОроЯрпБродрпНродро╛ро▓рпН 10 ро░рпВрокро╛ропрпН роХро┐роЯрпИроХрпНроХрпБроорпН роОройрпНро▒рпБ ропро╛ро░ропро╡родрпБ роХрпЗроЯрпНроЯрпБ 10 ро░рпВрокро╛ропрпН роЪроорпНрокро╛родро┐роХрпНроХ рокро╛ро░рпБроЩрпНроХро│рпН."
    ],
    "The Lovers": [
        "роЙро▒ро╡рпБроХро│рпБроХрпНроХро╛рой роирпЗро░роорпН тАУ роЙро▒ро╡рпБроХрпНроХро╛ро░ро░рпНроХро│рпН роЕройрпИро╡ро░рпИропрпБроорпН ро╡рпАроЯрпНроЯро┐ро▒рпНроХрпБ ро╡ро░ роЪрпКро▓рпНро▓ро┐ро╡ро┐роЯрпНроЯрпБ роирпАроЩрпНроХро│рпН ро╡рпЖро│ро┐ропрпЗ роЪрпЖройрпНро▒рпБ ро╡ро┐роЯрпБроЩрпНроХро│рпН. роЗройрпНро▒рпБ роТро░рпБ рокрпБродро┐роп роЙро▒ро╡рпИ роЖро░роорпНрокро┐роХрпНроХ родропро╛ро░рпН роЪрпЖропрпНропро▓ро╛рооро╛ - роЯрпАроХрпНроХроЯрпИропро┐ро▓рпН рокрпБродро┐роп роЕроХрпНроХро╡рпБрогрпНроЯрпИ роЖро░роорпНрокро┐роХрпНроХро▓ро╛роорпН. роЙро▒ро╡рпБроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ ро╡ро░рпБроорпН роЪроирпНродрпЛро╖родрпНродрпИ роЕройрпБрокро╡ро┐роХрпНроХро▓ро╛рооро╛? - роирпАроЩрпНроХро│рпН роХроЯрпБроорпН роХро╖рпНроЯродрпНродро┐ро▓рпН роЗро░рпБрокродро╛роХ роЪрпКро▓рпНро▓рпБроЩрпНроХро│рпН, роЕро╡ро░рпНроХро│рпН роЪроирпНродрпЛро╖рокрпНрокроЯрпБро╡ро╛ро░рпНроХро│рпН."
    ],
    "The Chariot": [
        "роЙро▒рпНроЪро╛роХрооро╛роХ роорпБройрпНройрпЗро▒рпБроЩрпНроХро│рпН тАУ роЗродрпБро╡ро░рпИ роТроЯрпНроЯроЯрпИ роЕроЯро┐родрпНродрпБроХрпНроХрпКрогрпНроЯро┐ро░рпБроирпНрод роирпАроЩрпНроХро│рпН, роЗройро┐ рооро╛рокрпН роЕроЯро┐роХрпНроХрпБрооро│ро╡рпБ роорпБройрпНройрпЗро▒ рокрпЛроХро┐ро▒рпАро░рпНроХро│рпН. роЪро┐ро▒ро┐роп ро╡рпЖро▒рпНро▒ро┐роХро│рпИропрпБроорпН роХрпКрогрпНроЯро╛роЯ ро╡ро┤ро┐ ро╡роирпНродрпБ ро╡ро┐роЯрпНроЯродрпБ - рокрпБроХрпН роХро┐ро░ро┐роХрпНроХрпЖроЯрпНроЯро┐ро▓рпН 20 ро░ройрпН роЕроЯро┐родрпНродродрпИ роХрпКрогрпНроЯро╛роЯрпБроЩрпНроХро│рпН. роТро░рпБ роирпАрогрпНроЯ рокропрогродрпНродрпИ роирпЖро░рпБроЩрпНроХро┐ роорпБройрпНройрпЗро▒ ро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒рпБ роЙрогро░рпНроХро┐ро▒рпАро░рпНроХро│ро╛. рокро╛рогрпНроЯро┐роЪрпНроЪрпЗро░ро┐ рокропрогроорпН роорпБроЯро┐роХрпНроХрпБроорпН рокрпЛродрпБ роЕроирпНрод роЙрогро░рпНро╡рпБ ро╡ро░ро▓ро╛роорпН."
    ],
    "Strength": [
        "роЪро┐ро▒рпБ роЪро╡ро╛ро▓рпНроХро│рпИ роОродро┐ро░рпНроХрпКрогрпНроЯрпБ ро╡рпЖро▒рпНро▒ро┐ропроЯрпИроп роорпБропро▒рпНроЪро┐роХрпНроХро▓ро╛рооро╛? роУроЪро┐ роЯрпАроХрпНроХро╛роХ роТро▒рпНро▒рпИроХрпНроХро╛ро▓ро┐ро▓рпН роУроЯрпНроЯрокрпНрокроирпНродропроорпН роУроЯро┐ роЬрпЖропро┐роХрпНроХро▓ро╛роорпН. родро│рпНро│рпБрокроЯро┐ роиро╛роЯрпНроХро│рпБроХрпНроХроХ роХро╛родрпНродро┐ро░рпБроирпНродрпБ роЙроЩрпНроХро│рпН рокрпКро░рпБро│ро╛родро╛ро░родрпНродрпИроХрпН роХро╛роХрпНроХро▓ро╛роорпН - 50 ро░рпВрокро╛ропрпНроХрпНроХрпБ 6 роХро░рпНроЪрпНроЪрпАрокрпН ро╡ро╛роЩрпНроХрпБроорпН роХро╛ро▓роорпН ро╡роирпНродрпБ ро╡ро┐роЯрпНроЯродрпБ. роорпБродро▓ро┐ро▓рпН роТро░рпБ роЪрпБро╡рпИропро╛рой роХро╛рокро┐ропрпБроЯройрпН роЙроЩрпНроХро│рпН роиро╛ро│рпИ родрпКроЯроЩрпНроХро▓ро╛рооро╛? роирпАроЩрпНроХро│рпЗ рокрпЛроЯрпНроЯрпБ роХрпБроЯро┐ропрпБроЩрпНроХро│рпН."
    ],
    "The Hermit": [
        "родройро┐роорпИропро┐ро▓рпН роЙро│рпНро│ роирпЗро░родрпНродрпИ роЕройрпБрокро╡ро┐роХрпНроХ роЖроЪрпИропро╛? роирпАроЩрпНроХро│рпН роПро▒рпНроХройро╡рпЗ родройро┐ропро╛роХродрпНродро╛ройрпН роЗро░рпБроХрпНроХро┐ро▒рпАро░рпНроХро│рпН. роЕроорпИродро┐ропрпБроЯройрпН роЙроЩрпНроХро│рпН ро╡ро╛ро┤рпНроХрпНроХрпИропрпИ роЪрпАро░роорпИроХрпНроХ роирпЗро░рооро╛ - роЕройро┐ро░рпБродрпН рокро╛роЯро▓рпНроХро│рпИ роЪродрпНродроорпН ро╡рпИроХрпНроХро╛рооро▓рпН роХрпЗроЯрпНрокродрпБ роЪро┐ро▒роирпНродродрпБ. роЙроЩрпНроХро│рпН роорой роЕро┤рпБродрпНродродрпНродрпИ родрогро┐роХрпНроХ роТро░рпБ рокрпБродрпНродроХродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНропро▓ро╛роорпЖройрпНро▒рпБ роиро┐ройрпИродрпНродро╛ро▓рпН ропро╛ро░рпИропрпБроорпН родрпКроирпНродро░ро╡рпБ роЪрпЖропрпНропро╛рооро▓рпН родро╛ро░ро╛ро│рооро╛роХ родрпЗро░рпНро╡рпБ роЪрпЖропрпНропрпБроЩрпНроХро│рпН."
    ],
    "Wheel of Fortune": [
        "роЗройрпНро▒рпИроп рокро░рпБро╡роорпН роирпАроЩрпНроХро│рпН роОродро┐ро░рпНрокро╛ро░рпНроХрпНроХро╛род рооро╛ро▒рпНро▒роЩрпНроХро│рпИ роХро╛рогро▓ро╛роорпН. роорпЗройроЬро░рпН роЙроЩрпНроХро│рпИ рокро╛ро░рпНродрпНродрпБ роЪро┐ро░ро┐роХрпНроХро▓ро╛роорпН. роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, ро╡ро╛ро┤рпНроХрпИропро┐ро▓рпН рооро╛ро▒рпНро▒роЩрпНроХро│рпИ роПро▒рпНро▒рпБроХрпН роХрпКро│рпНроХро┐ройрпНро▒рпАро░рпНроХро│рпН - роЗройро┐ роЖрокрпАроЪро┐ро▓рпН роУроЪро┐ роХро╛рокро┐ роХро┐роЯрпИроХрпНроХро╛родрпБ."
    ],
    "Justice": [
        "роирпАродро┐ рооро▒рпНро▒рпБроорпН роЪроороиро┐ро▓рпИ роЗрокрпНрокрпЛродрпБ роЙроЩрпНроХро│рпН ро╡ро╛ро┤рпНроХрпИропро┐ро▓рпН рокро┐ро░родро╛ройрооро╛роХ роЙро│рпНро│родрпБ - рокро╛родрпНродро┐ро░роорпН ро╡ро┐ро▓роХрпНроХрпБро╡родро┐ро▓рпН роЗродрпБ роЙроЩрпНроХро│рпБроЯрпИроп роиро╛ро│рпН. роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, роирпЗро░рпНроорпИропро╛роХ роироЯроирпНродрпБ роХрпКро│рпНро│рпБроЩрпНроХро│рпН. роЕроорпНрооро╛ро╡ро┐роЯроорпН роХроЯройро╛роХ ро╡ро╛роЩрпНроХро┐роп роХро╛роЪрпИ родро┐ро░рпБрокрпНрокро┐ роХрпКроЯрпБродрпНродрпБ ро╡ро┐роЯрпБроЩрпНроХро│рпН."
    ],
    "The Hanged Man": [
        "роЗрокрпНрокрпЛродрпБ роирпАрогрпНроЯ роирпЗро░роорпН ропрпЛроЪро┐роХрпНроХро╡рпБроорпН роОродрпИ рокро▒рпНро▒ро┐ ропрпЛроЪро┐роХрпНроХро▓ро╛роорпН роОройрпНро▒рпБ. рокро┤роХрпНроХрооро╛рой рокро╛ро░рпНро╡рпИропрпИ рооро╛ро▒рпНро▒ ро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒рпБ роЗроирпНрод роирпЗро░роорпН роХрпВро▒рпБроХро┐ро▒родрпБ - роОродро┐ро░рпН ро╡рпАроЯрпНроЯрпБ рокрпЖрогрпНрогрпИ ро╡ро┐роЯрпНроЯрпБро╡ро┐роЯрпНроЯрпБ роЕроЯрпБродрпНрод родрпЖро░рпБ рокрпЖрогрпНрогрпИ роЙро╖ро╛ро░рпН роЪрпЖропрпНропро▓ро╛роорпН."
    ],
    "Death": [
        "роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, роорпБроЯро┐ро╡рпБроХро│рпИ роПро▒рпНроХ ро╡рпЗрогрпНроЯрпБроорпН. - роЪроорпНрокро│роорпН родро╛роородрооро╛роХ ро╡ро░ро▓ро╛роорпН. рокро┤рпИроп рокро░рпБро╡роЩрпНроХро│рпН роорпБроЯро┐роХро┐ройрпНро▒рой рооро▒рпНро▒рпБроорпН рокрпБродро┐роп роЖро░роорпНрокроЩрпНроХро│рпН роЖро░роорпНрокро┐роХрпНроХро┐ройрпНро▒рой - рооро┤рпИ ро╡ро░ро▓ро╛роорпН, роХро╛ропрокрпНрокрпЛроЯрпНроЯ родрпБрогро┐ропрпИ роОроЯрпБрокрпНрокродрпБ роиро▓рпНро▓родрпБ."
    ],
    "Temperance": [
        "роЕро┤роХро╛рой роЪроороиро┐ро▓рпИ рооро▒рпНро▒рпБроорпН рокрпКро▒рпБроорпИропрпИ роирпАроЩрпНроХро│рпН роЕройрпБрокро╡ро┐роХрпНроХ ро╡рпЗрогрпНроЯро┐роп роХро╛ро▓роорпН. роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, роЙроЩрпНроХро│рпН ро╡ро╛ро┤рпНроХрпНроХрпИропро┐ро▓рпН роЙройрпНройрод роЪроороиро┐ро▓рпИропрпБроЯройрпН роЗро░рпБроЩрпНроХро│рпН - роородро┐ропроорпН роЯрпАроорпН ро▓ройрпНроЪрпНроЪро┐ро▓рпН роХро┐роЯрпИродрпНрод роУроЪро┐ рокро┐ро░ро┐ропро╛рогро┐ рокрпЛро▓ро╡рпЗ роЗро░ро╡рпБроорпН роХро┐роЯрпИроХрпНроХро╛родрпБ, рокро┤рпИроп роЪро╛родроорпН роХрпВроЯ роХро┐роЯрпИроХрпНроХро▓ро╛роорпН."
    ],
    "The Devil": [
        "роирпАроЩрпНроХро│рпН роироорпНрокро┐роХрпНроХрпИропрпБроЯройрпН роХрпВроЯро┐роп роЗро┤рокрпНрокрпИ роЕройрпБрокро╡ро┐роХрпНроХро┐ройрпНро▒рпАро░рпНроХро│рпН. роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, родрпБройрпНрокроЩрпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ ро╡ро┐роЯрпБрокроЯ роЙроЩрпНроХро│рпН родро┐ро▒ройрпИ роХрогрпНроЯро▒ро┐ропрпБроЩрпНроХро│рпН. роЗро░рогрпНроЯрпБ роиро╛ро│рпН ро▓рпАро╡рпН рокрпЛроЯрпНроЯрпБ рооро▓рпНро▓ро╛роХрпНроХ рокроЯрпБродрпНродрпБ ро╡ро┐роЯрпНроЯродрпНродрпИ рокро╛ро░рпНродрпНродрокроЯро┐ родрпВроЩрпНроХро╡рпБроорпН."
    ],
    "The Tower": [
        "роЪрооропрпЛроЪро┐родрооро╛роХрпНроХро▓рпН рооро▒рпНро▒рпБроорпН ро╡ро┐рокродрпНродрпБроХро│рпН роЙроЩрпНроХро│рпН ро╡ро╛ро┤рпНроХрпНроХрпИропро┐ро▓рпН роиро┐роХро┤ро▓ро╛роорпН. роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, роирпАроЩрпНроХро│рпН рокрпБродро┐роп ро╡ро┤ро┐роХро│рпИ родрпЗроЯро┐ роорпБроЯро┐ро╡рпБроХро│рпИ роОроЯрпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. ро╡рогрпНроЯро┐ропрпИ роТро░рпБ роЗро░рогрпНроЯрпБ рооро╛родроорпН роЕроЯроХрпБ ро╡рпИродрпНродрпБ ро╡ро┐роЯрпНроЯрпБ ро╖рпЗро░рпН роЖроЯрпНроЯрпЛро╡ро┐ро▓рпН роЪрпЖро▓рпНро▓ро▓ро╛роорпН."
    ],
    "The Star": [
        "роироЯрпНроЪродрпНродро┐ро░роЩрпНроХро│ро┐ройрпН роЕро┤роХрпБ роЙроЩрпНроХро│рпН ро╡ро╛ро┤рпНроХрпНроХрпИропрпИ роТро│ро┐ро░роЪрпН роЪрпЖропрпНропрпБроорпН. роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, роирпАроЩрпНроХро│рпН рокрпБродро┐роп роироорпНрокро┐роХрпНроХрпИропрпИ роХрогрпНроЯрпБрокро┐роЯро┐рокрпНрокрпАро░рпНроХро│рпН. роЕродро▒рпНроХро╛роХ роироЯрпНроЪродрпНродро┐ро░роорпН роироХро░рпНроХро┐ро▒родрпБ родро┐ро░рпИрокрпНрокроЯродрпНродрпИ рокро╛ро░рпНроХрпНроХро▓ро╛рооро╛ роОройрпНро▒рпБ роОроХродрпНродро╛ро│роорпН рокрпЗроЪ ро╡рпЗрогрпНроЯро╛роорпН."
    ],
    "The Moon": [
        "роЙроЩрпНроХро│рпБроЯрпИроп рокропроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роХрпБро▒рпИроХро│рпН роЙроЩрпНроХро│рпБроХрпНроХрпБ ро╡рпЖро│ро┐рокрпНрокроЯрпИропро╛ройродрпБ. роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН, ропро╛ро░ро╛ро╡родрпБ роХрпБро┤рокрпНрокродрпНродрпИ роПро▒рпНрокроЯрпБродрпНродро┐ропрпБро│рпНро│ро╛ро░рпНроХро│рпН - роХрпБро┤рокрпНрокрооро╛рой роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН роХрпБро┤роорпНрокро╛рооро▓рпН, роХрпБро┤рокрпНрокрооро╛рой роХрпБро┤рокрпНрок рооройроиро┐ро▓рпИропрпИ роХрпБро┤рокрпНрокрооро┐ро▓рпНро▓ро╛рооро▓рпН роХрпИропро╛ро│рпБроЩрпНроХро│рпН."
    ],
    "The Sun": [
        "роЗроирпНрод роирпЗро░родрпНродро┐ро▓рпН роЪроирпНродрпЛро╖роорпН рооро▒рпНро▒рпБроорпН ро╡рпЖро▒рпНро▒ро┐ роиро┐роЪрпНроЪропрооро╛роХ роЙроЩрпНроХро│рпБроХрпНроХрпБроХрпН роХро┐роЯрпИроХрпНроХрпБроорпН. роирпАроЩрпНроХро│рпН роЙро▒рпНроЪро╛роХроорпН рооро▒рпНро▒рпБроорпН роЖро░рпЛроХрпНроХро┐ропродрпНродрпИ роЕройрпБрокро╡ро┐роХрпНроХ рокрпЛроХро┐ро▒рпАро░рпНроХро│рпН - ро░рпЗроЯро┐ропрпЛ роХро╛рогрпНроЯрпЖро╕рпНроЯро┐ро▓рпН роЬрпЖропро┐родрпНрод рокрпНро│рпВ роЯрпВродрпН ро╕рпНрокрпАроХрпНроХро░ро┐ро▓рпН рокро╛роЯро▓рпН роХрпЗроЯрпНроЯрпБ роХрпБродрпБроХро▓рооро╛роХ роЗро░рпБроЩрпНроХро│рпН."
    ],
    "Judgement": [
        "роЗродрпБ роЙроЩрпНроХро│рпН рооро▒рпБрокро┐ро▒ро╡ро┐. рокродро┐ро╡рпБроХро│рпИ рооро▒рпБрокро░ро┐роЪрпАро▓ройрпИ роЪрпЖропрпНродрпБ рокрпБродро┐роп роЙродрпНродро┐ роирпЖро▒ро┐ родрпКроЯроЩрпНроХрпБроЩрпНроХро│рпН - роЗроирпНрод роорпБро▒рпИропро╛ро╡родрпБ ро╡рпАроЯрпНроЯро┐ро▓рпН роЪрпКройрпНрой роЪро╛рооро╛ройрпНроХро│рпИ рооро│ро┐роХрпИроХрпН роХроЯрпИропро┐ро▓рпН рооро▒роХрпНроХро╛рооро▓рпН ро╡ро╛роЩрпНроХро┐ ро╡ро╛ро░рпБроЩрпНроХро│рпН."
    ],
    "The World": [
        "роЙро▓роХродрпНродрпИ роЕро░ро┐родро╛роХ роХро╛рогрпБроорпНрокрпЛродрпБ, роирпАроЩрпНроХро│рпН роЕройрпИродрпНродрпБ ро╡ро┐ро╖ропроЩрпНроХро│рпИропрпБроорпН роиро┐ро▒рпИро╡рпБ роЪрпЖропрпНродрпБро╡ро┐роЯрпНроЯрпАро░рпНроХро│рпН. роГрокрпНро░ро┐роЯрпНроЬро┐ро▓рпН ро╡ро╛роЩрпНроХро┐ ро╡рпИродрпНродро┐ро░рпБроирпНрод ро╕рпНройро╛роХрпНро╕рпН роЕройрпИродрпНродрпБроорпН роХро╛ро▓рпИропро┐ро▓рпН роХро╛рогрооро▓рпН рокрпЛройродро▒рпНроХро╛рой роХро╛ро░рогро╛роорпН роирпАроЩрпНроХро│рпН роОройрпНро▒рпБ родрпЖро░ро┐роп ро╡ро░ро▓ро╛роорпН."
    ]
}

# Correct path for images directory
IMAGE_DIR = "images"  # Update this path if your images are in a different directory

tarot_images = {
    "The Fool": os.path.join(IMAGE_DIR, "The Fool.jpg"),
    "The Magician": os.path.join(IMAGE_DIR, "The Magician.jpg"),
    "The High Priestess": os.path.join(IMAGE_DIR, "The High Priestess.jpg"),
    "The Empress": os.path.join(IMAGE_DIR, "The Empress.jpg"),
    "The Emperor": os.path.join(IMAGE_DIR, "The Emperor.jpg"),
    "The Hierophant": os.path.join(IMAGE_DIR, "The Hierophant.jpg"),
    "The Lovers": os.path.join(IMAGE_DIR, "The Lovers.jpg"),
    "The Chariot": os.path.join(IMAGE_DIR, "The Chariot.jpg"),
    "Strength": os.path.join(IMAGE_DIR, "Strength.jpg"),
    "The Hermit": os.path.join(IMAGE_DIR, "The Hermit.jpg"),
    "Wheel of Fortune": os.path.join(IMAGE_DIR, "Wheel of Fortune.jpg"),
    "Justice": os.path.join(IMAGE_DIR, "Justice.jpg"),
    "The Hanged Man": os.path.join(IMAGE_DIR, "The Hanged Man.jpg"),
    "Death": os.path.join(IMAGE_DIR, "Death.jpg"),
    "Temperance": os.path.join(IMAGE_DIR, "Temperance.jpg"),
    "The Devil": os.path.join(IMAGE_DIR, "The Devil.jpg"),
    "The Tower": os.path.join(IMAGE_DIR, "The Tower.jpg"),
    "The Star": os.path.join(IMAGE_DIR, "The Star.jpg"),
    "The Moon": os.path.join(IMAGE_DIR, "The Moon.jpg"),
    "The Sun": os.path.join(IMAGE_DIR, "The Sun.jpg"),
    "Judgement": os.path.join(IMAGE_DIR, "Judgement.jpg"),
    "The World": os.path.join(IMAGE_DIR, "The World.jpg"),
}

default_image = os.path.join(IMAGE_DIR, "default.jpg")
logo_image = os.path.join(IMAGE_DIR, "logo.png")

# Function to validate date of birth
def validate_dob(dob):
    try:
        datetime.strptime(dob, "%d:%m:%y")
        return True
    except ValueError:
        return False

# Function to draw a tarot card
def draw_card():
    card = random.choice(list(tarot_deck.keys()))
    interpretation = random.choice(tarot_deck[card])
    return card, interpretation

# Function to get image path for the card
def get_image_path(card):
    return tarot_images.get(card, default_image)

# Function to generate Tamil audio
def generate_tamil_audio(text, audio_file="output.mp3", speed_factor=1.0):
    tts = gTTS(text, lang='ta')
    tts.save(audio_file)

    sound = AudioSegment.from_file(audio_file)
    if speed_factor != 1.0:
        sound = speedup(sound, playback_speed=speed_factor)
    
    altered_file = f"altered_{audio_file}"
    sound.export(altered_file, format="mp3")
    return altered_file

# Function to convert images to Base64
def media_to_base64(file_path):
    with open(file_path, "rb") as media_file:
        return base64.b64encode(media_file.read()).decode()

# Add custom styling for the app
st.markdown(
    """
    <style>
    body {
            margin: 100px; /* Adds 50px margin around the entire content */
            padding: 50px; /* Optional: Adds padding inside the content area */
            background-color: #2e1a47; /* Keep the existing background color */
    }
    .main-header {  
        text-align: center;
        margin-top: 20px;
        color: #ffd700;
    }
    .main-header img {
        width: 200px;
        margin-bottom: 20px;
    }
    .card-image {
        display: block;
        margin: 20px auto;
        border-radius: 10px;
        box-shadow: 0px 0px 15px 5px #ffd700;
        max-width: 300px;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

# Header Section
st.markdown(
    """
    <div class="main-header">
        <img src="data:image/png;base64,{}" style="width: 400px; margin-bottom: 40px;">
        <h1 style="font-size: 40px; color: #ffd700; text-align: center;">
            ЁЯФо Mirchi Joe's AI Tarot Reading ЁЯФо
        </h1>
        <p>Step into the mystical realm and unveil your destiny!</p>
    </div>
    """.format(media_to_base64(logo_image)),
    unsafe_allow_html=True,
)

# User Input Section
st.sidebar.header("ЁЯФо Your Journey Awaits")
name = st.sidebar.text_input("Your Name", placeholder="Enter your name", key="name_input")
dob = st.sidebar.text_input("Date of Birth (DD:MM:YY)", placeholder="Enter your DOB", key="dob_input")
reading_style = st.sidebar.radio("Choose Your Reading Style", ["Serious", "Fun"], key="reading_style_radio")
enable_audio = st.sidebar.checkbox("Enable Mystical Audio", value=False, key="enable_audio_checkbox")

# Speed Selection
audio_speed = st.sidebar.radio(
    "Choose Audio Speed",
    options=["Normal", "Fast", "Slow"],
    index=0,  # Default to "Normal"
    key="audio_speed_radio"
)

# Map speed options to playback speeds
speed_factor_mapping = {
    "Normal": 1.0,
    "Fast": 1.2,
    "Slow": 0.8,
}
selected_speed = speed_factor_mapping[audio_speed]

if st.sidebar.button("ЁЯФо Draw the Card ЁЯФо", key="reveal_button"):
    if not validate_dob(dob):
        st.sidebar.error("Invalid Date of Birth. Please use the format DD:MM:YY.")
    else:
        card, interpretation = draw_card()
        if reading_style == "Serious":
            interpretation += " роЗродрпИ роТро░рпБ роЖро┤рпНроирпНрод роЪрпЖропрпНродро┐ропро╛роХ роОроЯрпБродрпНродрпБроХрпН роХрпКро│рпНро│рпБроЩрпНроХро│рпН."
        else:
            interpretation += " роЪро┐ро░роородрпНродрпИ роЕройрпБрокро╡ро┐ропрпБроЩрпНроХро│рпН!"

        st.markdown(
            f"""
            <div style="text-align: center; margin-top: 20px;">
                <h2 style="color: #ffd700;">Welcome, {name}!</h2>
                <p style="font-size: 18px;">Your card holds the answers:</p>
                <img src="data:image/jpeg;base64,{media_to_base64(get_image_path(card))}" class="card-image">
                <h3 style="margin-top: 20px; color: #ffd700;">Card: {card}</h3>
                <p style="font-size: 16px;">{interpretation}</p>
            </div>
            """,
            unsafe_allow_html=True,
        )

        # Generate and play audio
        if enable_audio:
            progress_bar = st.progress(0)  # Initialize progress bar
            status_text = st.empty()  # Placeholder for status text
            
            # Step 1: Prepare text for audio
            status_text.text("Preparing text for audio...")
            text_to_speak = f"ро╡рогроХрпНроХроорпН {name}, {interpretation}"
            progress_bar.progress(20)  # Update progress to 20%

            # Step 2: Generate audio using gTTS
            status_text.text("Generating audio file...")
            audio_file = "output.mp3"
            tts = gTTS(text_to_speak, lang='ta')
            tts.save(audio_file)
            progress_bar.progress(60)  # Update progress to 60%

            # Step 3: Adjust audio speed (if necessary)
            if selected_speed != 1.0:
                status_text.text("Adjusting audio speed...")
                sound = AudioSegment.from_file(audio_file)
                sound = speedup(sound, playback_speed=selected_speed)
                altered_file = f"altered_{audio_file}"
                sound.export(altered_file, format="mp3")
                audio_file = altered_file
            progress_bar.progress(90)  # Update progress to 90%

            # Step 4: Finalize and prepare playback
            status_text.text("Finalizing...")
            time.sleep(0.5)  # Simulate a small delay for finalization
            progress_bar.progress(100)  # Update progress to 100%

            # Show success message and audio
            progress_bar.empty()  # Clear progress bar
            status_text.empty()  # Clear status text
            st.success("Audio is ready! ЁЯО╡")
            st.audio(audio_file)

# Footer Section
st.markdown(
    """
    <div style="text-align: center; margin-top: 50px;">
        <hr>
        <p>_Thank you for stepping into the mystical realm with Mirchi Joe! тЬи_</p>
    </div>
    """,
    unsafe_allow_html=True,
)
